1,1,FF,ff_anychecked,Any Checked,Validate that any radio button or checkbox of a group is checked.,Element Validation,"function ff_anychecked(element, message)
{
    // get plain name
   // alert(document.ff_form52['ff_nm_bfQuickMode6303958[]']);
   // alert(document.getElementById(element.id).id);
    var name = '';
    if(!element.name){
    	if(element.length && element.length != 0){
           name = element[0].name;
           var cnt = 0;
           for (var i = 0; i < element.length; i++)
             if (element[i].name==name) 
              if (element[i].checked) cnt++;                      
           if (cnt==0) {
            ff_validationFocus(element[0].name);
            if (message=='') message = ""Please check or select ""+name+"".\n"";
            return message;
           } // if 

        } else {
           return '';
        }
    } else {
      name = element.name;
      if (name.substr(0,6) == 'ff_nm_') name = name.substring(6,name.length-2);

      // loop through elements and count selections
      var cnt = 0;
      for (var i = 0; i < ff_elements.length; i++)
        if (ff_elements[i][2]==name) 
            if (ff_getElementByIndex(i).checked) cnt++;

      // if none selected, emitt error
      if (cnt==0) {
        ff_validationFocus(element.name);
        if (message=='') message = ""Please check or select ""+name+"".\n"";
        return message;
      } // if
    }
    
    return '';
} // ff_anychecked"
2,1,FF,ff_checked,Checked,Validate that radio button or checkbox is checked.,Element Validation,"function ff_checked(element, message)
{
    if (element.checked) 
        return ''; 
    else {
        if (message=='') message = element.name+"" is not checked.\n"";
        ff_validationFocus(element.name);
        return message;
    } 
}"
3,1,FF,ff_checkedValue,Get checked value,Get value of the currently checked radiobutton.,Untyped,"function ff_checkedValue(name)
{
    // loop through elements and find checked
    for (i = 0; i < ff_elements.length; i++)
        if (ff_elements[i][2]==name) {
            e = ff_getElementByIndex(i);
            if (e.checked) return e.value;
        } // if 
    return '';
} // ff_checkedValue"
4,1,FF,ff_countQuerySelections,Count Query Selections,Counts how many checkboxes/radiobuttons are checked/selected in a query list element,Untyped,"function ff_countQuerySelections(name)
{
    var id = ff_getIdByName(name);
    var cnt = ff_queryRows[id].length;
    var pagesize = ff_queryPageSize[id];
    if (pagesize>0) {
        var currpage = ff_queryCurrPage[id];
        var p;
        for (p = 1; p < currpage; p++) cnt -= pagesize;
        if (cnt > pagesize) cnt = pagesize;
    } // if
    var curr;
    var sels = 0;
    for (curr = 0; curr < cnt; curr++)
        if (document.getElementById('ff_cb'+id+'_'+curr).checked) sels++;
    return sels;
} // ff_countQuerySelections"
5,1,FF,ff_dollaramount2dp,Dollar Amount with 2 Decimal Places,Validate that a dollar amount with two decimal places is entered.,Element Validation,"function ff_dollaramount2dp(element, message)
{
    var ex  = /^\d+$|^\d+\.\d{2}$/;
    if (!ex.test(element.value)) {
        if (message=='') message = element.name+"" must be a number with two decimal places.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_dollaramount2dp"
6,1,FF,ff_expString,String export,Export string function: escapes special characters of a string,Untyped,"function ff_expString(text)
{
    text = trim(text);
    var i;
    var o = '';
    for(i = 0; i < text.length; i++) {
        c = text.charAt(i);
        switch(c) {
            case ';' : o += '\\x3B'; break;
            case ',' : o += '\\x2C'; break;
            case '&' : o += '\\x26'; break;
            case '<' : o += '\\x3C'; break;
            case '>' : o += '\\x3E'; break;
            case '\'': o += '\\x27'; break;
            case '\\': o += '\\x5C'; break;
            case '""' : o += '\\x22'; break;
            case '\n': o += '\\n'; break;
            case '\r': o += '\\r'; break;
            default: o += c;
        } // switch
    } // for
    return o;
} // expString"
7,1,FF,ff_flashupload_not_empty,Flash Upload Not Empty (QuickMode only!),Validates if a flash upload is empty or not.,Element Validation,"function ff_flashupload_not_empty(element, message)
{
    if(typeof bfSummarizers == ""undefined"") { alert(""Flash upload validation only available in QuickMode!""); return ''}
    if(JQuery('#bfFlashFileQueue'+element.id.split('ff_elem')[1]).html() != '') return '';
    if (message=='') message = ""Please enter ""+element.name+"".\n"";
    ff_validationFocus(element.name);
    return message;
} // ff_valuenotempty"
8,1,FF,ff_getfocus,Get focus,Get the focus. Usually this is for the first element of the form/page.,Element Init,"function ff_getfocus(element,condition)
{
    if(!element.name){
    	if(element.length && element.length != 0){
    		element[0].focus();
    	}
    }else{
    	element.focus();
    }
}"
9,1,FF,ff_getQuerySelectedRows,Get Query Selected Rows,Returns the selected rows in a 2-dimensional array,Untyped,"function ff_getQuerySelectedRows(name)
{
    var id = ff_getIdByName(name);
    var rcnt = ff_queryRows[id].length;
    var cnt = rcnt;
    var pagesize = ff_queryPageSize[id];
    if (pagesize>0) {
        var currpage = ff_queryCurrPage[id];
        var p;
        for (p = 1; p < currpage; p++) cnt -= pagesize;
        if (cnt > pagesize) cnt = pagesize;
    } // if
    var curr, r;
    var selcnt = 0;
    var sels = new Array;
    for (curr = 0; curr < cnt; curr++) {
        var elem = document.getElementById('ff_cb'+id+'_'+curr);
        if (elem.checked) {
            var ident = elem.value;
            for (r = 0; r < rcnt; r++)
                if (ff_queryRows[id][r][0] == ident) {
                    sels[selcnt++] = ff_queryRows[id][r];
                    break;
                } // if
        } // if
    } // for
    return sels;
} // ff_getQuerySelectedRows"
10,1,FF,ff_getQuerySelections,Get Query Selected ID's,Returns the column values of the checked/selected checkboxes/radiobuttons in an array,Untyped,"function ff_getQuerySelections(name)
{
    var id = ff_getIdByName(name);
    var cnt = ff_queryRows[id].length;
    var pagesize = ff_queryPageSize[id];
    if (pagesize>0) {
        var currpage = ff_queryCurrPage[id];
        var p;
        for (p = 1; p < currpage; p++) cnt -= pagesize;
        if (cnt > pagesize) cnt = pagesize;
    } // if
    var curr;
    var selcnt = 0;
    var sels = new Array;
    for (curr = 0; curr < cnt; curr++) {
        var elem = document.getElementById('ff_cb'+id+'_'+curr);
        if (elem.checked) 
            sels[selcnt++] = elem.value;
    } // for
    return sels;
} // ff_getQuerySelections"
11,1,FF,ff_htmlvaluenotempty,HTML Texteditor Not Empty,Checks if an HTML editor element is empty or not,Element Validation,"function ff_htmlvaluenotempty( element, message ){
    
    if( typeof bf_htmltextareanames == ""undefined"" ) return '';

    var content = """";

    for(var i = 0; i < bf_htmltextareanames.length; i++){
      if( element.name == bf_htmltextareanames[i] ) {
          eval(""content = "" + bf_htmltextareas[i]);
          break;
      }
    }
    if (JQuery.trim(content) == """") {
        if (message=='') message = element.name+"" must not be empty.\n"";
        return message;
    } // if
    return '';
}"
12,1,FF,ff_impString,String import,Import string function: unescapes c-coded characters of a string,Untyped,"function ff_impString(text)
{
    var str = '';
    var ss = 0;
    var s;
    var tl = text.length;
    var hexdigs = ""0123456789abcdefABCDEF"";
    while (ss < tl) {
        s = text.charAt(ss++);
        if (s == '\\') {
            if (ss < tl) s = text.charAt(ss++); else s = 0;
            switch (s) {
                case 0   : break;
                case 'e' : str += '\33'; break;
                case 't' : str += '\t'; break;
                case 'r' : str += '\r'; break;
                case 'n' : str += '\n'; break;
                case 'f' : str += '\f'; break;
                case 'x' : {
                    if (ss < tl) s = text.charAt(ss++); else s = 0;
                    var ch = '';
                    while (hexdigs.indexOf(s)>=0 && ch.length < 2) {
                        ch += s;
                        if (ss < tl) s = text.charAt(ss++); else s = 0;
                    } // while
                    while (ch.length < 2) ch = '0'+ch;
                    str += unescape('%'+ch);
                    if (s) ss--;
                    break;
                }
                default:
                    str += s;
            } // switch
        } else
            str += s;
    } // while
    return str;
} // impString"
13,1,FF,ff_integer,Integer Number,Validate that an integer value is entered.,Element Validation,"function ff_integer(element, message)
{
    var ex  = /(^-?\d\d*$)/;
    if (!ex.test(element.value)) {
        if (message=='') message = element.name+"" must be integer.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_integer"
14,1,FF,ff_integeramount,Positive Integer,Validate that an positive integer value is entered.,Element Validation,"function ff_integeramount(element, message)
{
    var ex  = /(^-?\d\d*$)/;
    if (!ex.test(element.value)) {
        if (message=='') message = element.name+"" must be integer.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_integeramount"
15,1,FF,ff_integer_or_empty,Integer or empty,Validate that either an integer value or nothing is entered.,Element Validation,"function ff_integer_or_empty(element, message)
{
    if (element.value != '') {
        var ex  = /(^-?\d\d*$)/;
        if (!ex.test(element.value)) {
            if (message=='') message = element.name+"" must be integer.\n"";
            ff_validationFocus(element.name);
            return message;
        } // if
    } // if
    return '';
} // ff_integer_or_empty"
16,1,FF,ff_nextpage,Next page,Switchs to the next page.,Element Action,"function ff_nextpage(element, action)
{
    if (ff_currentpage < ff_lastpage) {
        ff_switchpage(ff_currentpage+1);
        self.scrollTo(0,0);
    }
} // ff_nextpage"
17,1,FF,ff_page1,Page 1,Switches to the first page.,Element Action,"function ff_page1(element, action)
{
    ff_switchpage(1);
} // ff_page1"
18,1,FF,ff_page2,Page 2,Switches to the second page.,Element Action,"function ff_page2(element, action)
{
    if (ff_lastpage >= 2) ff_switchpage(2);
} // ff_page2"
19,1,FF,ff_page3,Page 3,Switches to the third page.,Element Action,"function ff_page3(element, action)
{
    if (ff_lastpage >= 3) ff_switchpage(3);
} // ff_page3"
20,1,FF,ff_previouspage,Previous page,Switches to the previous page.,Element Action,"function ff_previouspage(element, action)
{
    if (ff_currentpage > 1){
        ff_switchpage(ff_currentpage-1);
        self.scrollTo(0,0);
    }
} // ff_previouspage"
21,1,FF,ff_real,Real Number,Validate that a real number is entered.,Element Validation,"function ff_real(element, message)
{
    var ex  = /(^-?\d\d*\.?\d*$)/;
    if (!ex.test(element.value)) {
        if (message=='') message = element.name+"" must be a number.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_real"
22,1,FF,ff_realamount,Positive Real Number,Validate that a positive real number is entered.,Element Validation,"function ff_realamount(element, message)
{
    var ex  = /(^\d\d*\.?\d*$)/;
    if (!ex.test(element.value)) {
        if (message=='') message = element.name+"" must be a number.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_realamount"
23,1,FF,ff_resetForm,Reset form,Reset all form inputs to the initial values.,Element Action,"function ff_resetForm(element, action)
{
    eval('document.'+ff_processor.form_id).reset();
} // ff_resetForm"
24,1,FF,ff_securitycode_entered,Security code entered,Check that a security code was entered.,Element Validation,"function ff_securitycode_entered(element, message)
{
    var ex  = /(^\d{5}$)/;
    if (!ex.test(element.value)) {
        if (message=='') message = ""Security code must be entered as five digits.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_securitycode_entered"
25,1,FF,ff_securitycode_ok,Security code ok,Check that a valid security code was entered.,Element Validation,"function ff_securitycode_ok(element, message)
{
<?php
    global $ff_seccode;
    if (!isset($ff_seccode)) { 
        mt_srand((double)microtime()*1000000);
        $ff_seccode = mt_rand(10000, 99999);
        JFactory::getSession()->set('ff_seccode', $ff_seccode);
    } // if
    $enc = array();
    mt_srand((double)microtime()*1000000);
    for ($i = 0; $i < 256; $i++) $enc[] = mt_rand(0, 255);
    $seccode = (string)$ff_seccode;
    $hash = '';
    $ini = $ff_seccode % 240;
    for ($i = 0; $i < 5; $i++) {
        $d = $ini+intval($seccode{$i});
        for ($j = 0; $j < 7; $j++) $d = $enc[$d];
        $hash .= $d;
        $ini = ($ini+$d) % 240;
    } // for
    return
        ""var enc = "".$this->expJsValue($enc)."";\n"".
        ""var seccode = new String(element.value);\n"".
        ""if (seccode.length==5) {\n"".
        ""    var hash = '';\n"".
        ""    var ini = parseInt(element.value) % 240;\n"".
        ""    var i, j;\n"".
        ""    for (i = 0; i < 5; i++) {\n"".
        ""        var d = ini+parseInt(seccode.charAt(i));\n"".
        ""        for (j = 0; j < 7; j++) d = enc[d];\n"".
        ""        hash += d;\n"".
        ""        ini = (ini+d) % 240;\n"".
        ""    } // for\n"".
        ""    if (hash == '$hash') return '';\n"". 
        ""} // if\n"".
        ""if (message=='') message = \""Security code is missing or wrong.\\n\"";\n"".
        ""ff_validationFocus(element.name);\n"".
        ""return message;\n"";
?>
} // ff_securitycode_ok"
26,1,FF,ff_selectedValues,Get selected values as list,"Get values of selected options of a select list as list:

x = ff_selectedValues('myselectlist');
// x = green,red",Untyped,"function ff_selectedValues(name)
{
    vals = '';
    opts = ff_getElementByName(name).options;
    for (o = 0; o < opts.length; o++)
        if (opts[o].selected) {
            if (vals != '') vals += ',';
            vals += opts[o].value;
        } // if
    return vals;
} // ff_selectedValues"
27,1,FF,ff_setChecked,Set radiobutton checked,Set a radiobutton checked/unchecked,Untyped,"function ff_setChecked(name, value, checked)
{
    if (arguments.length<3) checked = true;
    for (var i = 0; i < ff_elements.length; i++)
        if (ff_elements[i][2]==name) {
            var e = ff_getElementByIndex(i);
            if (e.value == value) {
                e.checked = checked;
                break;
            } // if
        } // if
} // ff_setChecked"
28,1,FF,ff_setSelected,Select options of  select list,"Select options in a Select List element.

ff_setSelected('mylist', 'green'); // select green in single or multi mode, unselect all other options
ff_setSelected('mylist', 'red,green'); // select red and green in multi mode, unselect all other options",Untyped,"function ff_setSelected(name, list)
{
    ids = list.split(',')
    opts = ff_getElementByName(name).options;
    for (o = 0; o < opts.length; o++) {
        state = false;
        for (i = 0; i < ids.length; i++) 
            if (ids[i]==opts[o].value) {
                state = true;
                break;
            } // if
        opts[o].selected = state;
    } // for
} // ff_setSelected"
29,1,FF,ff_showaction,Show action,Displays the element action.,Element Action,"function ff_showaction(element, action)
{
   alert('Action '+action+' performed by element '+element.id);
}"
30,1,FF,ff_showelementinit,Show element initialization,Display the element initialization (mainly for debugging),Element Init,"function ff_showelementinit(element,condition)
{
    if(!element.name)
    	if(element.length && element.length != 0)
    		alert('Initialization of '+element[0].name+' at '+condition);
    else
    	alert('Initialization of '+element.name+' at '+condition);
}"
31,1,FF,ff_showforminit,Show form initialization,Show when form initialization is run (for debugging),Form Init,"function ff_showforminit()
{
    alert('Form initialization');
}"
32,1,FF,ff_showsubmitted,Show submitted status,Display submit status as user feedback.,Form Submitted,"function ff_showsubmitted(status, message)
{
    alert(message);
} // ff_showsubmitted"
33,1,FF,ff_showvalidation,Show element validation,Display element validation (for debugging),Element Validation,"function ff_showvalidation(element, message)
{
    alert('Validation of '+element.name+"" with message: \n""+message);
    return '';
}"
34,1,FF,ff_submittedhome,Return to homepage,Display submit status and then return to the home page of the site.,Form Submitted,"function ff_submittedhome(status, message)
{
    alert(message+""\nYou will be redirected to the home page now."");
    ff_returnHome();
} // ff_submittedhome"
35,1,FF,ff_unchecked,Unchecked,Validate that radio button or checkbox is unchecked.,Element Validation,"function ff_unchecked(element, message)
{
    if (!element.checked) 
        return ''; 
    else {
        if (message=='') message = element.name+"" is checked.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
} // ff_unchecked"
36,1,FF,ff_validate_date_DDMMYYYY,Validate Date DD/MM/YYYY format,"Validates that the date in a textfield is correctly formatted in DD/MM/YYYY format.
Can be used with a textfield element and/or the Calendar element.",Element Validation,"function ff_validate_date_DDMMYYYY(element, message)
{
   // Regular expression used to check if date is in correct format
   var pattern = /[0-3][0-9]\/(0|1)[0-9]\/(19|20)[0-9]{2}/;
   if(pattern.test(element.value))
   {
      var date_array = element.value.split('/');
      var day = date_array[0];

      // Attention! Javascript consider months in the range 0 - 11
      var month = date_array[1] - 1;
      var year = date_array[2];

      // This instruction will create a date object
      source_date = new Date(year,month,day);

      if(year != source_date.getFullYear())
      {
         return message == '' ? 'Element ' + element.name + ' failed my test' : message;
      }

      if(month != source_date.getMonth())
      {
         return message == '' ? 'Element ' + element.name + ' failed my test' : message;
      }

      if(day != source_date.getDate())
      {
         return message == '' ? 'Element ' + element.name + ' failed my test' : message;
      }
   }
   else
   {
      return message == '' ? 'Element ' + element.name + ' failed my test' : message;
   }

   return '';
}"
37,1,FF,ff_validate_form,Validate form,Validates the form and displays the result.,Element Action,"function ff_validate_form(element, action)
{
    if(typeof bfUseErrorAlerts != 'undefined'){
     JQuery("".bfErrorMessage"").html('');
     JQuery("".bfErrorMessage"").css(""display"",""none"");
    }
    error = ff_validation(0);
    if (error != '') {
        if(typeof bfUseErrorAlerts == 'undefined'){
           alert(error);
        } else {
           bfShowErrors(error);
        }
        ff_validationFocus('');
    } else
        alert('All inputs are valid.');
} // ff_validate_form"
38,1,FF,ff_validate_nextpage,Validate and next page,"Validates the current page, and if everything is ok is switches to the next page.",Element Action,"function ff_validate_nextpage(element, action)
{
    if(typeof bfUseErrorAlerts != 'undefined'){
     JQuery("".bfErrorMessage"").html('');
     JQuery("".bfErrorMessage"").css(""display"",""none"");
    }

    error = ff_validation(ff_currentpage);
    if (error != '') {
       if(typeof bfUseErrorAlerts == 'undefined'){
           alert(error);
        } else {
           bfShowErrors(error);
        }
        ff_validationFocus('');
    } else {
        ff_switchpage(ff_currentpage+1);
        self.scrollTo(0,0);   
    }
} // ff_validate_nextpage"
39,1,FF,ff_validate_page,Validate page,Validates the current page and displays the result.,Element Action,"function ff_validate_page(element, action)
{
    if(typeof bfUseErrorAlerts != 'undefined'){
     JQuery("".bfErrorMessage"").html('');
     JQuery("".bfErrorMessage"").css(""display"",""none"");
    }
    error = ff_validation(ff_currentpage);
    if (error != '') {
        if(typeof bfUseErrorAlerts == 'undefined'){
           alert(error);
        } else {
           bfShowErrors(error);
        }
        ff_validationFocus('');
    } else
        alert('All inputs are valid.');
} // ff_validate_page"
40,1,FF,ff_validate_prevpage,Validate previous page,Validates the current page and switches to the previous page if all is ok,Element Action,"function ff_validate_prevpage(element, action)
{
    if(typeof bfUseErrorAlerts != 'undefined'){
     JQuery("".bfErrorMessage"").html('');
     JQuery("".bfErrorMessage"").css(""display"",""none"");
    }

    error = ff_validation(ff_currentpage);
    if (error != '') {
       if(typeof bfUseErrorAlerts == 'undefined'){
           alert(error);
        } else {
           bfShowErrors(error);
        }
        ff_validationFocus('');
    } else{
    	if(ff_currentpage > 1){
	 ff_switchpage(ff_currentpage-1);
	 self.scrollTo(0,0);
        }
    }
} // ff_validate_prevpage"
41,1,FF,ff_validate_submit,Validate and submit form,"Validates the whole form, and if everything is ok it submits the form.",Element Action,"function ff_validate_submit(element, action)
{
    if(typeof bfUseErrorAlerts != 'undefined'){
     JQuery("".bfErrorMessage"").html('');
     JQuery("".bfErrorMessage"").css(""display"",""none"");
    }
    error = ff_validation(0);
    if (error != '') {

        if(typeof bfUseErrorAlerts == 'undefined'){
           alert(error);
        } else {
           bfShowErrors(error);
        }
        ff_validationFocus();
    } else
        ff_submitForm();
} // ff_validate_submit"
42,1,FF,ff_validemail,Valid email,Validate entry of a valid email (syntax check only),Element Validation,"function ff_validemail(element, message)
{
    var check =
    /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    if (!check.test(element.value)){
        if (message=='') message = element.name+"" is no valid email address.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_validemail"
43,1,FF,ff_validemail_repeat,Validate Email repeat,"Checks if the field value is a valid email address and has a second counterpart that has an equal value.
The 2nd email field must be named ""FIELDNAME_repeat""!",Element Validation,"function ff_validemail_repeat(element, message)
{
    var check =
    /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    if (!check.test(element.value)){
        if (message=='') message = element.name+"" is no valid email address.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
	
    try{
	    var repeat = element.name.split(""ff_nm_"")[1].split(""[]"")[0];
	
	    if(!ff_getElementByName(repeat + '_repeat')){
	     	if (message=='') message = repeat+"" has no repeat email field.\n"";
	        ff_validationFocus(element.name);
	        return message;
	    } else {
	        if(ff_getElementByName(repeat + '_repeat').value != element.value){
	           if (message=='') message = element.name+"" and "" + repeat + ""_repeat do not match.\n"";
	           ff_validationFocus(repeat + '_repeat');
	           return message;
	        }
	    }
    }catch(e){
        return e.description;
    }

    return '';
} // ff_validemail"
44,1,FF,ff_valuenotempty,Value not empty,Validate that value is not empty.,Element Validation,"function ff_valuenotempty(element, message)
{
    if (element.value!='') return ''; 
    if (message=='') message = ""Please enter ""+element.name+"".\n"";
    ff_validationFocus(element.name);
    return message;
} // ff_valuenotempty"
45,1,FF,ff_anychecked,Any Checked,Validate that any radio button or checkbox of a group is checked.,Element Validation,"function ff_anychecked(element, message)
{
    // get plain name
   // alert(document.ff_form52['ff_nm_bfQuickMode6303958[]']);
   // alert(document.getElementById(element.id).id);
    var name = '';
    if(!element.name){
    	if(element.length && element.length != 0){
           name = element[0].name;
           var cnt = 0;
           for (var i = 0; i < element.length; i++)
             if (element[i].name==name) 
              if (element[i].checked) cnt++;                      
           if (cnt==0) {
            ff_validationFocus(element[0].name);
            if (message=='') message = ""Please check or select ""+name+"".\n"";
            return message;
           } // if 

        } else {
           return '';
        }
    } else {
      name = element.name;
      if (name.substr(0,6) == 'ff_nm_') name = name.substring(6,name.length-2);

      // loop through elements and count selections
      var cnt = 0;
      for (var i = 0; i < ff_elements.length; i++)
        if (ff_elements[i][2]==name) 
            if (ff_getElementByIndex(i).checked) cnt++;

      // if none selected, emitt error
      if (cnt==0) {
        ff_validationFocus(element.name);
        if (message=='') message = ""Please check or select ""+name+"".\n"";
        return message;
      } // if
    }
    
    return '';
} // ff_anychecked"
46,1,FF,ff_checked,Checked,Validate that radio button or checkbox is checked.,Element Validation,"function ff_checked(element, message)
{
    if (element.checked) 
        return ''; 
    else {
        if (message=='') message = element.name+"" is not checked.\n"";
        ff_validationFocus(element.name);
        return message;
    } 
}"
47,1,FF,ff_checkedValue,Get checked value,Get value of the currently checked radiobutton.,Untyped,"function ff_checkedValue(name)
{
    // loop through elements and find checked
    for (i = 0; i < ff_elements.length; i++)
        if (ff_elements[i][2]==name) {
            e = ff_getElementByIndex(i);
            if (e.checked) return e.value;
        } // if 
    return '';
} // ff_checkedValue"
48,1,FF,ff_countQuerySelections,Count Query Selections,Counts how many checkboxes/radiobuttons are checked/selected in a query list element,Untyped,"function ff_countQuerySelections(name)
{
    var id = ff_getIdByName(name);
    var cnt = ff_queryRows[id].length;
    var pagesize = ff_queryPageSize[id];
    if (pagesize>0) {
        var currpage = ff_queryCurrPage[id];
        var p;
        for (p = 1; p < currpage; p++) cnt -= pagesize;
        if (cnt > pagesize) cnt = pagesize;
    } // if
    var curr;
    var sels = 0;
    for (curr = 0; curr < cnt; curr++)
        if (document.getElementById('ff_cb'+id+'_'+curr).checked) sels++;
    return sels;
} // ff_countQuerySelections"
49,1,FF,ff_dollaramount2dp,Dollar Amount with 2 Decimal Places,Validate that a dollar amount with two decimal places is entered.,Element Validation,"function ff_dollaramount2dp(element, message)
{
    var ex  = /^\d+$|^\d+\.\d{2}$/;
    if (!ex.test(element.value)) {
        if (message=='') message = element.name+"" must be a number with two decimal places.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_dollaramount2dp"
50,1,FF,ff_expString,String export,Export string function: escapes special characters of a string,Untyped,"function ff_expString(text)
{
    text = trim(text);
    var i;
    var o = '';
    for(i = 0; i < text.length; i++) {
        c = text.charAt(i);
        switch(c) {
            case ';' : o += '\\x3B'; break;
            case ',' : o += '\\x2C'; break;
            case '&' : o += '\\x26'; break;
            case '<' : o += '\\x3C'; break;
            case '>' : o += '\\x3E'; break;
            case '\'': o += '\\x27'; break;
            case '\\': o += '\\x5C'; break;
            case '""' : o += '\\x22'; break;
            case '\n': o += '\\n'; break;
            case '\r': o += '\\r'; break;
            default: o += c;
        } // switch
    } // for
    return o;
} // expString"
51,1,FF,ff_flashupload_not_empty,Flash Upload Not Empty (QuickMode only!),Validates if a flash upload is empty or not.,Element Validation,"function ff_flashupload_not_empty(element, message)
{
    if(typeof bfSummarizers == ""undefined"") { alert(""Flash upload validation only available in QuickMode!""); return ''}
    if(JQuery('#bfFlashFileQueue'+element.id.split('ff_elem')[1]).html() != '') return '';
    if (message=='') message = ""Please enter ""+element.name+"".\n"";
    ff_validationFocus(element.name);
    return message;
} // ff_valuenotempty"
52,1,FF,ff_getfocus,Get focus,Get the focus. Usually this is for the first element of the form/page.,Element Init,"function ff_getfocus(element,condition)
{
    if(!element.name){
    	if(element.length && element.length != 0){
    		element[0].focus();
    	}
    }else{
    	element.focus();
    }
}"
53,1,FF,ff_getQuerySelectedRows,Get Query Selected Rows,Returns the selected rows in a 2-dimensional array,Untyped,"function ff_getQuerySelectedRows(name)
{
    var id = ff_getIdByName(name);
    var rcnt = ff_queryRows[id].length;
    var cnt = rcnt;
    var pagesize = ff_queryPageSize[id];
    if (pagesize>0) {
        var currpage = ff_queryCurrPage[id];
        var p;
        for (p = 1; p < currpage; p++) cnt -= pagesize;
        if (cnt > pagesize) cnt = pagesize;
    } // if
    var curr, r;
    var selcnt = 0;
    var sels = new Array;
    for (curr = 0; curr < cnt; curr++) {
        var elem = document.getElementById('ff_cb'+id+'_'+curr);
        if (elem.checked) {
            var ident = elem.value;
            for (r = 0; r < rcnt; r++)
                if (ff_queryRows[id][r][0] == ident) {
                    sels[selcnt++] = ff_queryRows[id][r];
                    break;
                } // if
        } // if
    } // for
    return sels;
} // ff_getQuerySelectedRows"
54,1,FF,ff_getQuerySelections,Get Query Selected ID's,Returns the column values of the checked/selected checkboxes/radiobuttons in an array,Untyped,"function ff_getQuerySelections(name)
{
    var id = ff_getIdByName(name);
    var cnt = ff_queryRows[id].length;
    var pagesize = ff_queryPageSize[id];
    if (pagesize>0) {
        var currpage = ff_queryCurrPage[id];
        var p;
        for (p = 1; p < currpage; p++) cnt -= pagesize;
        if (cnt > pagesize) cnt = pagesize;
    } // if
    var curr;
    var selcnt = 0;
    var sels = new Array;
    for (curr = 0; curr < cnt; curr++) {
        var elem = document.getElementById('ff_cb'+id+'_'+curr);
        if (elem.checked) 
            sels[selcnt++] = elem.value;
    } // for
    return sels;
} // ff_getQuerySelections"
55,1,FF,ff_htmlvaluenotempty,HTML Texteditor Not Empty,Checks if an HTML editor element is empty or not,Element Validation,"function ff_htmlvaluenotempty( element, message ){
    
    if( typeof bf_htmltextareanames == ""undefined"" ) return '';

    var content = """";

    for(var i = 0; i < bf_htmltextareanames.length; i++){
      if( element.name == bf_htmltextareanames[i] ) {
          eval(""content = "" + bf_htmltextareas[i]);
          break;
      }
    }
    if (JQuery.trim(content) == """") {
        if (message=='') message = element.name+"" must not be empty.\n"";
        return message;
    } // if
    return '';
}"
56,1,FF,ff_impString,String import,Import string function: unescapes c-coded characters of a string,Untyped,"function ff_impString(text)
{
    var str = '';
    var ss = 0;
    var s;
    var tl = text.length;
    var hexdigs = ""0123456789abcdefABCDEF"";
    while (ss < tl) {
        s = text.charAt(ss++);
        if (s == '\\') {
            if (ss < tl) s = text.charAt(ss++); else s = 0;
            switch (s) {
                case 0   : break;
                case 'e' : str += '\33'; break;
                case 't' : str += '\t'; break;
                case 'r' : str += '\r'; break;
                case 'n' : str += '\n'; break;
                case 'f' : str += '\f'; break;
                case 'x' : {
                    if (ss < tl) s = text.charAt(ss++); else s = 0;
                    var ch = '';
                    while (hexdigs.indexOf(s)>=0 && ch.length < 2) {
                        ch += s;
                        if (ss < tl) s = text.charAt(ss++); else s = 0;
                    } // while
                    while (ch.length < 2) ch = '0'+ch;
                    str += unescape('%'+ch);
                    if (s) ss--;
                    break;
                }
                default:
                    str += s;
            } // switch
        } else
            str += s;
    } // while
    return str;
} // impString"
57,1,FF,ff_integer,Integer Number,Validate that an integer value is entered.,Element Validation,"function ff_integer(element, message)
{
    var ex  = /(^-?\d\d*$)/;
    if (!ex.test(element.value)) {
        if (message=='') message = element.name+"" must be integer.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_integer"
58,1,FF,ff_integeramount,Positive Integer,Validate that an positive integer value is entered.,Element Validation,"function ff_integeramount(element, message)
{
    var ex  = /(^-?\d\d*$)/;
    if (!ex.test(element.value)) {
        if (message=='') message = element.name+"" must be integer.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_integeramount"
59,1,FF,ff_integer_or_empty,Integer or empty,Validate that either an integer value or nothing is entered.,Element Validation,"function ff_integer_or_empty(element, message)
{
    if (element.value != '') {
        var ex  = /(^-?\d\d*$)/;
        if (!ex.test(element.value)) {
            if (message=='') message = element.name+"" must be integer.\n"";
            ff_validationFocus(element.name);
            return message;
        } // if
    } // if
    return '';
} // ff_integer_or_empty"
60,1,FF,ff_nextpage,Next page,Switchs to the next page.,Element Action,"function ff_nextpage(element, action)
{
    if (ff_currentpage < ff_lastpage) {
        ff_switchpage(ff_currentpage+1);
        self.scrollTo(0,0);
    }
} // ff_nextpage"
61,1,FF,ff_page1,Page 1,Switches to the first page.,Element Action,"function ff_page1(element, action)
{
    ff_switchpage(1);
} // ff_page1"
62,1,FF,ff_page2,Page 2,Switches to the second page.,Element Action,"function ff_page2(element, action)
{
    if (ff_lastpage >= 2) ff_switchpage(2);
} // ff_page2"
63,1,FF,ff_page3,Page 3,Switches to the third page.,Element Action,"function ff_page3(element, action)
{
    if (ff_lastpage >= 3) ff_switchpage(3);
} // ff_page3"
64,1,FF,ff_previouspage,Previous page,Switches to the previous page.,Element Action,"function ff_previouspage(element, action)
{
    if (ff_currentpage > 1){
        ff_switchpage(ff_currentpage-1);
        self.scrollTo(0,0);
    }
} // ff_previouspage"
65,1,FF,ff_real,Real Number,Validate that a real number is entered.,Element Validation,"function ff_real(element, message)
{
    var ex  = /(^-?\d\d*\.?\d*$)/;
    if (!ex.test(element.value)) {
        if (message=='') message = element.name+"" must be a number.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_real"
66,1,FF,ff_realamount,Positive Real Number,Validate that a positive real number is entered.,Element Validation,"function ff_realamount(element, message)
{
    var ex  = /(^\d\d*\.?\d*$)/;
    if (!ex.test(element.value)) {
        if (message=='') message = element.name+"" must be a number.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_realamount"
67,1,FF,ff_resetForm,Reset form,Reset all form inputs to the initial values.,Element Action,"function ff_resetForm(element, action)
{
    eval('document.'+ff_processor.form_id).reset();
} // ff_resetForm"
68,1,FF,ff_securitycode_entered,Security code entered,Check that a security code was entered.,Element Validation,"function ff_securitycode_entered(element, message)
{
    var ex  = /(^\d{5}$)/;
    if (!ex.test(element.value)) {
        if (message=='') message = ""Security code must be entered as five digits.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_securitycode_entered"
69,1,FF,ff_securitycode_ok,Security code ok,Check that a valid security code was entered.,Element Validation,"function ff_securitycode_ok(element, message)
{
<?php
    global $ff_seccode;
    if (!isset($ff_seccode)) { 
        mt_srand((double)microtime()*1000000);
        $ff_seccode = mt_rand(10000, 99999);
        JFactory::getSession()->set('ff_seccode', $ff_seccode);
    } // if
    $enc = array();
    mt_srand((double)microtime()*1000000);
    for ($i = 0; $i < 256; $i++) $enc[] = mt_rand(0, 255);
    $seccode = (string)$ff_seccode;
    $hash = '';
    $ini = $ff_seccode % 240;
    for ($i = 0; $i < 5; $i++) {
        $d = $ini+intval($seccode{$i});
        for ($j = 0; $j < 7; $j++) $d = $enc[$d];
        $hash .= $d;
        $ini = ($ini+$d) % 240;
    } // for
    return
        ""var enc = "".$this->expJsValue($enc)."";\n"".
        ""var seccode = new String(element.value);\n"".
        ""if (seccode.length==5) {\n"".
        ""    var hash = '';\n"".
        ""    var ini = parseInt(element.value) % 240;\n"".
        ""    var i, j;\n"".
        ""    for (i = 0; i < 5; i++) {\n"".
        ""        var d = ini+parseInt(seccode.charAt(i));\n"".
        ""        for (j = 0; j < 7; j++) d = enc[d];\n"".
        ""        hash += d;\n"".
        ""        ini = (ini+d) % 240;\n"".
        ""    } // for\n"".
        ""    if (hash == '$hash') return '';\n"". 
        ""} // if\n"".
        ""if (message=='') message = \""Security code is missing or wrong.\\n\"";\n"".
        ""ff_validationFocus(element.name);\n"".
        ""return message;\n"";
?>
} // ff_securitycode_ok"
70,1,FF,ff_selectedValues,Get selected values as list,"Get values of selected options of a select list as list:

x = ff_selectedValues('myselectlist');
// x = green,red",Untyped,"function ff_selectedValues(name)
{
    vals = '';
    opts = ff_getElementByName(name).options;
    for (o = 0; o < opts.length; o++)
        if (opts[o].selected) {
            if (vals != '') vals += ',';
            vals += opts[o].value;
        } // if
    return vals;
} // ff_selectedValues"
71,1,FF,ff_setChecked,Set radiobutton checked,Set a radiobutton checked/unchecked,Untyped,"function ff_setChecked(name, value, checked)
{
    if (arguments.length<3) checked = true;
    for (var i = 0; i < ff_elements.length; i++)
        if (ff_elements[i][2]==name) {
            var e = ff_getElementByIndex(i);
            if (e.value == value) {
                e.checked = checked;
                break;
            } // if
        } // if
} // ff_setChecked"
72,1,FF,ff_setSelected,Select options of  select list,"Select options in a Select List element.

ff_setSelected('mylist', 'green'); // select green in single or multi mode, unselect all other options
ff_setSelected('mylist', 'red,green'); // select red and green in multi mode, unselect all other options",Untyped,"function ff_setSelected(name, list)
{
    ids = list.split(',')
    opts = ff_getElementByName(name).options;
    for (o = 0; o < opts.length; o++) {
        state = false;
        for (i = 0; i < ids.length; i++) 
            if (ids[i]==opts[o].value) {
                state = true;
                break;
            } // if
        opts[o].selected = state;
    } // for
} // ff_setSelected"
73,1,FF,ff_showaction,Show action,Displays the element action.,Element Action,"function ff_showaction(element, action)
{
   alert('Action '+action+' performed by element '+element.id);
}"
74,1,FF,ff_showelementinit,Show element initialization,Display the element initialization (mainly for debugging),Element Init,"function ff_showelementinit(element,condition)
{
    if(!element.name)
    	if(element.length && element.length != 0)
    		alert('Initialization of '+element[0].name+' at '+condition);
    else
    	alert('Initialization of '+element.name+' at '+condition);
}"
75,1,FF,ff_showforminit,Show form initialization,Show when form initialization is run (for debugging),Form Init,"function ff_showforminit()
{
    alert('Form initialization');
}"
76,1,FF,ff_showsubmitted,Show submitted status,Display submit status as user feedback.,Form Submitted,"function ff_showsubmitted(status, message)
{
    alert(message);
} // ff_showsubmitted"
77,1,FF,ff_showvalidation,Show element validation,Display element validation (for debugging),Element Validation,"function ff_showvalidation(element, message)
{
    alert('Validation of '+element.name+"" with message: \n""+message);
    return '';
}"
78,1,FF,ff_submittedhome,Return to homepage,Display submit status and then return to the home page of the site.,Form Submitted,"function ff_submittedhome(status, message)
{
    alert(message+""\nYou will be redirected to the home page now."");
    ff_returnHome();
} // ff_submittedhome"
79,1,FF,ff_unchecked,Unchecked,Validate that radio button or checkbox is unchecked.,Element Validation,"function ff_unchecked(element, message)
{
    if (!element.checked) 
        return ''; 
    else {
        if (message=='') message = element.name+"" is checked.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
} // ff_unchecked"
80,1,FF,ff_validate_date_DDMMYYYY,Validate Date DD/MM/YYYY format,"Validates that the date in a textfield is correctly formatted in DD/MM/YYYY format.
Can be used with a textfield element and/or the Calendar element.",Element Validation,"function ff_validate_date_DDMMYYYY(element, message)
{
   // Regular expression used to check if date is in correct format
   var pattern = /[0-3][0-9]\/(0|1)[0-9]\/(19|20)[0-9]{2}/;
   if(pattern.test(element.value))
   {
      var date_array = element.value.split('/');
      var day = date_array[0];

      // Attention! Javascript consider months in the range 0 - 11
      var month = date_array[1] - 1;
      var year = date_array[2];

      // This instruction will create a date object
      source_date = new Date(year,month,day);

      if(year != source_date.getFullYear())
      {
         return message == '' ? 'Element ' + element.name + ' failed my test' : message;
      }

      if(month != source_date.getMonth())
      {
         return message == '' ? 'Element ' + element.name + ' failed my test' : message;
      }

      if(day != source_date.getDate())
      {
         return message == '' ? 'Element ' + element.name + ' failed my test' : message;
      }
   }
   else
   {
      return message == '' ? 'Element ' + element.name + ' failed my test' : message;
   }

   return '';
}"
81,1,FF,ff_validate_form,Validate form,Validates the form and displays the result.,Element Action,"function ff_validate_form(element, action)
{
    if(typeof bfUseErrorAlerts != 'undefined'){
     JQuery("".bfErrorMessage"").html('');
     JQuery("".bfErrorMessage"").css(""display"",""none"");
    }
    error = ff_validation(0);
    if (error != '') {
        if(typeof bfUseErrorAlerts == 'undefined'){
           alert(error);
        } else {
           bfShowErrors(error);
        }
        ff_validationFocus('');
    } else
        alert('All inputs are valid.');
} // ff_validate_form"
82,1,FF,ff_validate_nextpage,Validate and next page,"Validates the current page, and if everything is ok is switches to the next page.",Element Action,"function ff_validate_nextpage(element, action)
{
    if(typeof bfUseErrorAlerts != 'undefined'){
     JQuery("".bfErrorMessage"").html('');
     JQuery("".bfErrorMessage"").css(""display"",""none"");
    }

    error = ff_validation(ff_currentpage);
    if (error != '') {
       if(typeof bfUseErrorAlerts == 'undefined'){
           alert(error);
        } else {
           bfShowErrors(error);
        }
        ff_validationFocus('');
    } else {
        ff_switchpage(ff_currentpage+1);
        self.scrollTo(0,0);   
    }
} // ff_validate_nextpage"
83,1,FF,ff_validate_page,Validate page,Validates the current page and displays the result.,Element Action,"function ff_validate_page(element, action)
{
    if(typeof bfUseErrorAlerts != 'undefined'){
     JQuery("".bfErrorMessage"").html('');
     JQuery("".bfErrorMessage"").css(""display"",""none"");
    }
    error = ff_validation(ff_currentpage);
    if (error != '') {
        if(typeof bfUseErrorAlerts == 'undefined'){
           alert(error);
        } else {
           bfShowErrors(error);
        }
        ff_validationFocus('');
    } else
        alert('All inputs are valid.');
} // ff_validate_page"
84,1,FF,ff_validate_prevpage,Validate previous page,Validates the current page and switches to the previous page if all is ok,Element Action,"function ff_validate_prevpage(element, action)
{
    if(typeof bfUseErrorAlerts != 'undefined'){
     JQuery("".bfErrorMessage"").html('');
     JQuery("".bfErrorMessage"").css(""display"",""none"");
    }

    error = ff_validation(ff_currentpage);
    if (error != '') {
       if(typeof bfUseErrorAlerts == 'undefined'){
           alert(error);
        } else {
           bfShowErrors(error);
        }
        ff_validationFocus('');
    } else{
    	if(ff_currentpage > 1){
	 ff_switchpage(ff_currentpage-1);
	 self.scrollTo(0,0);
        }
    }
} // ff_validate_prevpage"
85,1,FF,ff_validate_submit,Validate and submit form,"Validates the whole form, and if everything is ok it submits the form.",Element Action,"function ff_validate_submit(element, action)
{
    if(typeof bfUseErrorAlerts != 'undefined'){
     JQuery("".bfErrorMessage"").html('');
     JQuery("".bfErrorMessage"").css(""display"",""none"");
    }
    error = ff_validation(0);
    if (error != '') {

        if(typeof bfUseErrorAlerts == 'undefined'){
           alert(error);
        } else {
           bfShowErrors(error);
        }
        ff_validationFocus();
    } else
        ff_submitForm();
} // ff_validate_submit"
86,1,FF,ff_validemail,Valid email,Validate entry of a valid email (syntax check only),Element Validation,"function ff_validemail(element, message)
{
    var check =
    /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    if (!check.test(element.value)){
        if (message=='') message = element.name+"" is no valid email address.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_validemail"
87,1,FF,ff_validemail_repeat,Validate Email repeat,"Checks if the field value is a valid email address and has a second counterpart that has an equal value.
The 2nd email field must be named ""FIELDNAME_repeat""!",Element Validation,"function ff_validemail_repeat(element, message)
{
    var check =
    /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    if (!check.test(element.value)){
        if (message=='') message = element.name+"" is no valid email address.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
	
    try{
	    var repeat = element.name.split(""ff_nm_"")[1].split(""[]"")[0];
	
	    if(!ff_getElementByName(repeat + '_repeat')){
	     	if (message=='') message = repeat+"" has no repeat email field.\n"";
	        ff_validationFocus(element.name);
	        return message;
	    } else {
	        if(ff_getElementByName(repeat + '_repeat').value != element.value){
	           if (message=='') message = element.name+"" and "" + repeat + ""_repeat do not match.\n"";
	           ff_validationFocus(repeat + '_repeat');
	           return message;
	        }
	    }
    }catch(e){
        return e.description;
    }

    return '';
} // ff_validemail"
88,1,FF,ff_valuenotempty,Value not empty,Validate that value is not empty.,Element Validation,"function ff_valuenotempty(element, message)
{
    if (element.value!='') return ''; 
    if (message=='') message = ""Please enter ""+element.name+"".\n"";
    ff_validationFocus(element.name);
    return message;
} // ff_valuenotempty"
89,1,FF,ff_anychecked,Any Checked,Validate that any radio button or checkbox of a group is checked.,Element Validation,"function ff_anychecked(element, message)
{
    // get plain name
   // alert(document.ff_form52['ff_nm_bfQuickMode6303958[]']);
   // alert(document.getElementById(element.id).id);
    var name = '';
    if(!element.name){
    	if(element.length && element.length != 0){
           name = element[0].name;
           var cnt = 0;
           for (var i = 0; i < element.length; i++)
             if (element[i].name==name) 
              if (element[i].checked) cnt++;                      
           if (cnt==0) {
            ff_validationFocus(element[0].name);
            if (message=='') message = ""Please check or select ""+name+"".\n"";
            return message;
           } // if 

        } else {
           return '';
        }
    } else {
      name = element.name;
      if (name.substr(0,6) == 'ff_nm_') name = name.substring(6,name.length-2);

      // loop through elements and count selections
      var cnt = 0;
      for (var i = 0; i < ff_elements.length; i++)
        if (ff_elements[i][2]==name) 
            if (ff_getElementByIndex(i).checked) cnt++;

      // if none selected, emitt error
      if (cnt==0) {
        ff_validationFocus(element.name);
        if (message=='') message = ""Please check or select ""+name+"".\n"";
        return message;
      } // if
    }
    
    return '';
} // ff_anychecked"
90,1,FF,ff_checked,Checked,Validate that radio button or checkbox is checked.,Element Validation,"function ff_checked(element, message)
{
    if (element.checked) 
        return ''; 
    else {
        if (message=='') message = element.name+"" is not checked.\n"";
        ff_validationFocus(element.name);
        return message;
    } 
}"
91,1,FF,ff_checkedValue,Get checked value,Get value of the currently checked radiobutton.,Untyped,"function ff_checkedValue(name)
{
    // loop through elements and find checked
    for (i = 0; i < ff_elements.length; i++)
        if (ff_elements[i][2]==name) {
            e = ff_getElementByIndex(i);
            if (e.checked) return e.value;
        } // if 
    return '';
} // ff_checkedValue"
92,1,FF,ff_countQuerySelections,Count Query Selections,Counts how many checkboxes/radiobuttons are checked/selected in a query list element,Untyped,"function ff_countQuerySelections(name)
{
    var id = ff_getIdByName(name);
    var cnt = ff_queryRows[id].length;
    var pagesize = ff_queryPageSize[id];
    if (pagesize>0) {
        var currpage = ff_queryCurrPage[id];
        var p;
        for (p = 1; p < currpage; p++) cnt -= pagesize;
        if (cnt > pagesize) cnt = pagesize;
    } // if
    var curr;
    var sels = 0;
    for (curr = 0; curr < cnt; curr++)
        if (document.getElementById('ff_cb'+id+'_'+curr).checked) sels++;
    return sels;
} // ff_countQuerySelections"
93,1,FF,ff_dollaramount2dp,Dollar Amount with 2 Decimal Places,Validate that a dollar amount with two decimal places is entered.,Element Validation,"function ff_dollaramount2dp(element, message)
{
    var ex  = /^\d+$|^\d+\.\d{2}$/;
    if (!ex.test(element.value)) {
        if (message=='') message = element.name+"" must be a number with two decimal places.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_dollaramount2dp"
94,1,FF,ff_expString,String export,Export string function: escapes special characters of a string,Untyped,"function ff_expString(text)
{
    text = trim(text);
    var i;
    var o = '';
    for(i = 0; i < text.length; i++) {
        c = text.charAt(i);
        switch(c) {
            case ';' : o += '\\x3B'; break;
            case ',' : o += '\\x2C'; break;
            case '&' : o += '\\x26'; break;
            case '<' : o += '\\x3C'; break;
            case '>' : o += '\\x3E'; break;
            case '\'': o += '\\x27'; break;
            case '\\': o += '\\x5C'; break;
            case '""' : o += '\\x22'; break;
            case '\n': o += '\\n'; break;
            case '\r': o += '\\r'; break;
            default: o += c;
        } // switch
    } // for
    return o;
} // expString"
95,1,FF,ff_flashupload_not_empty,Flash Upload Not Empty (QuickMode only!),Validates if a flash upload is empty or not.,Element Validation,"function ff_flashupload_not_empty(element, message)
{
    if(typeof bfSummarizers == ""undefined"") { alert(""Flash upload validation only available in QuickMode!""); return ''}
    if(JQuery('#bfFlashFileQueue'+element.id.split('ff_elem')[1]).html() != '') return '';
    if (message=='') message = ""Please enter ""+element.name+"".\n"";
    ff_validationFocus(element.name);
    return message;
} // ff_valuenotempty"
96,1,FF,ff_getfocus,Get focus,Get the focus. Usually this is for the first element of the form/page.,Element Init,"function ff_getfocus(element,condition)
{
    if(!element.name){
    	if(element.length && element.length != 0){
    		element[0].focus();
    	}
    }else{
    	element.focus();
    }
}"
97,1,FF,ff_getQuerySelectedRows,Get Query Selected Rows,Returns the selected rows in a 2-dimensional array,Untyped,"function ff_getQuerySelectedRows(name)
{
    var id = ff_getIdByName(name);
    var rcnt = ff_queryRows[id].length;
    var cnt = rcnt;
    var pagesize = ff_queryPageSize[id];
    if (pagesize>0) {
        var currpage = ff_queryCurrPage[id];
        var p;
        for (p = 1; p < currpage; p++) cnt -= pagesize;
        if (cnt > pagesize) cnt = pagesize;
    } // if
    var curr, r;
    var selcnt = 0;
    var sels = new Array;
    for (curr = 0; curr < cnt; curr++) {
        var elem = document.getElementById('ff_cb'+id+'_'+curr);
        if (elem.checked) {
            var ident = elem.value;
            for (r = 0; r < rcnt; r++)
                if (ff_queryRows[id][r][0] == ident) {
                    sels[selcnt++] = ff_queryRows[id][r];
                    break;
                } // if
        } // if
    } // for
    return sels;
} // ff_getQuerySelectedRows"
98,1,FF,ff_getQuerySelections,Get Query Selected ID's,Returns the column values of the checked/selected checkboxes/radiobuttons in an array,Untyped,"function ff_getQuerySelections(name)
{
    var id = ff_getIdByName(name);
    var cnt = ff_queryRows[id].length;
    var pagesize = ff_queryPageSize[id];
    if (pagesize>0) {
        var currpage = ff_queryCurrPage[id];
        var p;
        for (p = 1; p < currpage; p++) cnt -= pagesize;
        if (cnt > pagesize) cnt = pagesize;
    } // if
    var curr;
    var selcnt = 0;
    var sels = new Array;
    for (curr = 0; curr < cnt; curr++) {
        var elem = document.getElementById('ff_cb'+id+'_'+curr);
        if (elem.checked) 
            sels[selcnt++] = elem.value;
    } // for
    return sels;
} // ff_getQuerySelections"
99,1,FF,ff_htmlvaluenotempty,HTML Texteditor Not Empty,Checks if an HTML editor element is empty or not,Element Validation,"function ff_htmlvaluenotempty( element, message ){
    
    if( typeof bf_htmltextareanames == ""undefined"" ) return '';

    var content = """";

    for(var i = 0; i < bf_htmltextareanames.length; i++){
      if( element.name == bf_htmltextareanames[i] ) {
          eval(""content = "" + bf_htmltextareas[i]);
          break;
      }
    }
    if (JQuery.trim(content) == """") {
        if (message=='') message = element.name+"" must not be empty.\n"";
        return message;
    } // if
    return '';
}"
100,1,FF,ff_impString,String import,Import string function: unescapes c-coded characters of a string,Untyped,"function ff_impString(text)
{
    var str = '';
    var ss = 0;
    var s;
    var tl = text.length;
    var hexdigs = ""0123456789abcdefABCDEF"";
    while (ss < tl) {
        s = text.charAt(ss++);
        if (s == '\\') {
            if (ss < tl) s = text.charAt(ss++); else s = 0;
            switch (s) {
                case 0   : break;
                case 'e' : str += '\33'; break;
                case 't' : str += '\t'; break;
                case 'r' : str += '\r'; break;
                case 'n' : str += '\n'; break;
                case 'f' : str += '\f'; break;
                case 'x' : {
                    if (ss < tl) s = text.charAt(ss++); else s = 0;
                    var ch = '';
                    while (hexdigs.indexOf(s)>=0 && ch.length < 2) {
                        ch += s;
                        if (ss < tl) s = text.charAt(ss++); else s = 0;
                    } // while
                    while (ch.length < 2) ch = '0'+ch;
                    str += unescape('%'+ch);
                    if (s) ss--;
                    break;
                }
                default:
                    str += s;
            } // switch
        } else
            str += s;
    } // while
    return str;
} // impString"
101,1,FF,ff_integer,Integer Number,Validate that an integer value is entered.,Element Validation,"function ff_integer(element, message)
{
    var ex  = /(^-?\d\d*$)/;
    if (!ex.test(element.value)) {
        if (message=='') message = element.name+"" must be integer.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_integer"
102,1,FF,ff_integeramount,Positive Integer,Validate that an positive integer value is entered.,Element Validation,"function ff_integeramount(element, message)
{
    var ex  = /(^-?\d\d*$)/;
    if (!ex.test(element.value)) {
        if (message=='') message = element.name+"" must be integer.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_integeramount"
103,1,FF,ff_integer_or_empty,Integer or empty,Validate that either an integer value or nothing is entered.,Element Validation,"function ff_integer_or_empty(element, message)
{
    if (element.value != '') {
        var ex  = /(^-?\d\d*$)/;
        if (!ex.test(element.value)) {
            if (message=='') message = element.name+"" must be integer.\n"";
            ff_validationFocus(element.name);
            return message;
        } // if
    } // if
    return '';
} // ff_integer_or_empty"
104,1,FF,ff_nextpage,Next page,Switchs to the next page.,Element Action,"function ff_nextpage(element, action)
{
    if (ff_currentpage < ff_lastpage) {
        ff_switchpage(ff_currentpage+1);
        self.scrollTo(0,0);
    }
} // ff_nextpage"
105,1,FF,ff_page1,Page 1,Switches to the first page.,Element Action,"function ff_page1(element, action)
{
    ff_switchpage(1);
} // ff_page1"
106,1,FF,ff_page2,Page 2,Switches to the second page.,Element Action,"function ff_page2(element, action)
{
    if (ff_lastpage >= 2) ff_switchpage(2);
} // ff_page2"
107,1,FF,ff_page3,Page 3,Switches to the third page.,Element Action,"function ff_page3(element, action)
{
    if (ff_lastpage >= 3) ff_switchpage(3);
} // ff_page3"
108,1,FF,ff_previouspage,Previous page,Switches to the previous page.,Element Action,"function ff_previouspage(element, action)
{
    if (ff_currentpage > 1){
        ff_switchpage(ff_currentpage-1);
        self.scrollTo(0,0);
    }
} // ff_previouspage"
109,1,FF,ff_real,Real Number,Validate that a real number is entered.,Element Validation,"function ff_real(element, message)
{
    var ex  = /(^-?\d\d*\.?\d*$)/;
    if (!ex.test(element.value)) {
        if (message=='') message = element.name+"" must be a number.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_real"
110,1,FF,ff_realamount,Positive Real Number,Validate that a positive real number is entered.,Element Validation,"function ff_realamount(element, message)
{
    var ex  = /(^\d\d*\.?\d*$)/;
    if (!ex.test(element.value)) {
        if (message=='') message = element.name+"" must be a number.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_realamount"
111,1,FF,ff_resetForm,Reset form,Reset all form inputs to the initial values.,Element Action,"function ff_resetForm(element, action)
{
    eval('document.'+ff_processor.form_id).reset();
} // ff_resetForm"
112,1,FF,ff_securitycode_entered,Security code entered,Check that a security code was entered.,Element Validation,"function ff_securitycode_entered(element, message)
{
    var ex  = /(^\d{5}$)/;
    if (!ex.test(element.value)) {
        if (message=='') message = ""Security code must be entered as five digits.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_securitycode_entered"
113,1,FF,ff_securitycode_ok,Security code ok,Check that a valid security code was entered.,Element Validation,"function ff_securitycode_ok(element, message)
{
<?php
    global $ff_seccode;
    if (!isset($ff_seccode)) { 
        mt_srand((double)microtime()*1000000);
        $ff_seccode = mt_rand(10000, 99999);
        JFactory::getSession()->set('ff_seccode', $ff_seccode);
    } // if
    $enc = array();
    mt_srand((double)microtime()*1000000);
    for ($i = 0; $i < 256; $i++) $enc[] = mt_rand(0, 255);
    $seccode = (string)$ff_seccode;
    $hash = '';
    $ini = $ff_seccode % 240;
    for ($i = 0; $i < 5; $i++) {
        $d = $ini+intval($seccode{$i});
        for ($j = 0; $j < 7; $j++) $d = $enc[$d];
        $hash .= $d;
        $ini = ($ini+$d) % 240;
    } // for
    return
        ""var enc = "".$this->expJsValue($enc)."";\n"".
        ""var seccode = new String(element.value);\n"".
        ""if (seccode.length==5) {\n"".
        ""    var hash = '';\n"".
        ""    var ini = parseInt(element.value) % 240;\n"".
        ""    var i, j;\n"".
        ""    for (i = 0; i < 5; i++) {\n"".
        ""        var d = ini+parseInt(seccode.charAt(i));\n"".
        ""        for (j = 0; j < 7; j++) d = enc[d];\n"".
        ""        hash += d;\n"".
        ""        ini = (ini+d) % 240;\n"".
        ""    } // for\n"".
        ""    if (hash == '$hash') return '';\n"". 
        ""} // if\n"".
        ""if (message=='') message = \""Security code is missing or wrong.\\n\"";\n"".
        ""ff_validationFocus(element.name);\n"".
        ""return message;\n"";
?>
} // ff_securitycode_ok"
114,1,FF,ff_selectedValues,Get selected values as list,"Get values of selected options of a select list as list:

x = ff_selectedValues('myselectlist');
// x = green,red",Untyped,"function ff_selectedValues(name)
{
    vals = '';
    opts = ff_getElementByName(name).options;
    for (o = 0; o < opts.length; o++)
        if (opts[o].selected) {
            if (vals != '') vals += ',';
            vals += opts[o].value;
        } // if
    return vals;
} // ff_selectedValues"
115,1,FF,ff_setChecked,Set radiobutton checked,Set a radiobutton checked/unchecked,Untyped,"function ff_setChecked(name, value, checked)
{
    if (arguments.length<3) checked = true;
    for (var i = 0; i < ff_elements.length; i++)
        if (ff_elements[i][2]==name) {
            var e = ff_getElementByIndex(i);
            if (e.value == value) {
                e.checked = checked;
                break;
            } // if
        } // if
} // ff_setChecked"
116,1,FF,ff_setSelected,Select options of  select list,"Select options in a Select List element.

ff_setSelected('mylist', 'green'); // select green in single or multi mode, unselect all other options
ff_setSelected('mylist', 'red,green'); // select red and green in multi mode, unselect all other options",Untyped,"function ff_setSelected(name, list)
{
    ids = list.split(',')
    opts = ff_getElementByName(name).options;
    for (o = 0; o < opts.length; o++) {
        state = false;
        for (i = 0; i < ids.length; i++) 
            if (ids[i]==opts[o].value) {
                state = true;
                break;
            } // if
        opts[o].selected = state;
    } // for
} // ff_setSelected"
117,1,FF,ff_showaction,Show action,Displays the element action.,Element Action,"function ff_showaction(element, action)
{
   alert('Action '+action+' performed by element '+element.id);
}"
118,1,FF,ff_showelementinit,Show element initialization,Display the element initialization (mainly for debugging),Element Init,"function ff_showelementinit(element,condition)
{
    if(!element.name)
    	if(element.length && element.length != 0)
    		alert('Initialization of '+element[0].name+' at '+condition);
    else
    	alert('Initialization of '+element.name+' at '+condition);
}"
119,1,FF,ff_showforminit,Show form initialization,Show when form initialization is run (for debugging),Form Init,"function ff_showforminit()
{
    alert('Form initialization');
}"
120,1,FF,ff_showsubmitted,Show submitted status,Display submit status as user feedback.,Form Submitted,"function ff_showsubmitted(status, message)
{
    alert(message);
} // ff_showsubmitted"
121,1,FF,ff_showvalidation,Show element validation,Display element validation (for debugging),Element Validation,"function ff_showvalidation(element, message)
{
    alert('Validation of '+element.name+"" with message: \n""+message);
    return '';
}"
122,1,FF,ff_submittedhome,Return to homepage,Display submit status and then return to the home page of the site.,Form Submitted,"function ff_submittedhome(status, message)
{
    alert(message+""\nYou will be redirected to the home page now."");
    ff_returnHome();
} // ff_submittedhome"
123,1,FF,ff_unchecked,Unchecked,Validate that radio button or checkbox is unchecked.,Element Validation,"function ff_unchecked(element, message)
{
    if (!element.checked) 
        return ''; 
    else {
        if (message=='') message = element.name+"" is checked.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
} // ff_unchecked"
124,1,FF,ff_validate_date_DDMMYYYY,Validate Date DD/MM/YYYY format,"Validates that the date in a textfield is correctly formatted in DD/MM/YYYY format.
Can be used with a textfield element and/or the Calendar element.",Element Validation,"function ff_validate_date_DDMMYYYY(element, message)
{
   // Regular expression used to check if date is in correct format
   var pattern = /[0-3][0-9]\/(0|1)[0-9]\/(19|20)[0-9]{2}/;
   if(pattern.test(element.value))
   {
      var date_array = element.value.split('/');
      var day = date_array[0];

      // Attention! Javascript consider months in the range 0 - 11
      var month = date_array[1] - 1;
      var year = date_array[2];

      // This instruction will create a date object
      source_date = new Date(year,month,day);

      if(year != source_date.getFullYear())
      {
         return message == '' ? 'Element ' + element.name + ' failed my test' : message;
      }

      if(month != source_date.getMonth())
      {
         return message == '' ? 'Element ' + element.name + ' failed my test' : message;
      }

      if(day != source_date.getDate())
      {
         return message == '' ? 'Element ' + element.name + ' failed my test' : message;
      }
   }
   else
   {
      return message == '' ? 'Element ' + element.name + ' failed my test' : message;
   }

   return '';
}"
125,1,FF,ff_validate_form,Validate form,Validates the form and displays the result.,Element Action,"function ff_validate_form(element, action)
{
    if(typeof bfUseErrorAlerts != 'undefined'){
     JQuery("".bfErrorMessage"").html('');
     JQuery("".bfErrorMessage"").css(""display"",""none"");
    }
    error = ff_validation(0);
    if (error != '') {
        if(typeof bfUseErrorAlerts == 'undefined'){
           alert(error);
        } else {
           bfShowErrors(error);
        }
        ff_validationFocus('');
    } else
        alert('All inputs are valid.');
} // ff_validate_form"
126,1,FF,ff_validate_nextpage,Validate and next page,"Validates the current page, and if everything is ok is switches to the next page.",Element Action,"function ff_validate_nextpage(element, action)
{
    if(typeof bfUseErrorAlerts != 'undefined'){
     JQuery("".bfErrorMessage"").html('');
     JQuery("".bfErrorMessage"").css(""display"",""none"");
    }

    error = ff_validation(ff_currentpage);
    if (error != '') {
       if(typeof bfUseErrorAlerts == 'undefined'){
           alert(error);
        } else {
           bfShowErrors(error);
        }
        ff_validationFocus('');
    } else {
        ff_switchpage(ff_currentpage+1);
        self.scrollTo(0,0);   
    }
} // ff_validate_nextpage"
127,1,FF,ff_validate_page,Validate page,Validates the current page and displays the result.,Element Action,"function ff_validate_page(element, action)
{
    if(typeof bfUseErrorAlerts != 'undefined'){
     JQuery("".bfErrorMessage"").html('');
     JQuery("".bfErrorMessage"").css(""display"",""none"");
    }
    error = ff_validation(ff_currentpage);
    if (error != '') {
        if(typeof bfUseErrorAlerts == 'undefined'){
           alert(error);
        } else {
           bfShowErrors(error);
        }
        ff_validationFocus('');
    } else
        alert('All inputs are valid.');
} // ff_validate_page"
128,1,FF,ff_validate_prevpage,Validate previous page,Validates the current page and switches to the previous page if all is ok,Element Action,"function ff_validate_prevpage(element, action)
{
    if(typeof bfUseErrorAlerts != 'undefined'){
     JQuery("".bfErrorMessage"").html('');
     JQuery("".bfErrorMessage"").css(""display"",""none"");
    }

    error = ff_validation(ff_currentpage);
    if (error != '') {
       if(typeof bfUseErrorAlerts == 'undefined'){
           alert(error);
        } else {
           bfShowErrors(error);
        }
        ff_validationFocus('');
    } else{
    	if(ff_currentpage > 1){
	 ff_switchpage(ff_currentpage-1);
	 self.scrollTo(0,0);
        }
    }
} // ff_validate_prevpage"
129,1,FF,ff_validate_submit,Validate and submit form,"Validates the whole form, and if everything is ok it submits the form.",Element Action,"function ff_validate_submit(element, action)
{
    if(typeof bfUseErrorAlerts != 'undefined'){
     JQuery("".bfErrorMessage"").html('');
     JQuery("".bfErrorMessage"").css(""display"",""none"");
    }
    error = ff_validation(0);
    if (error != '') {

        if(typeof bfUseErrorAlerts == 'undefined'){
           alert(error);
        } else {
           bfShowErrors(error);
        }
        ff_validationFocus();
    } else
        ff_submitForm();
} // ff_validate_submit"
130,1,FF,ff_validemail,Valid email,Validate entry of a valid email (syntax check only),Element Validation,"function ff_validemail(element, message)
{
    var check =
    /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    if (!check.test(element.value)){
        if (message=='') message = element.name+"" is no valid email address.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
    return '';
} // ff_validemail"
131,1,FF,ff_validemail_repeat,Validate Email repeat,"Checks if the field value is a valid email address and has a second counterpart that has an equal value.
The 2nd email field must be named ""FIELDNAME_repeat""!",Element Validation,"function ff_validemail_repeat(element, message)
{
    var check =
    /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    if (!check.test(element.value)){
        if (message=='') message = element.name+"" is no valid email address.\n"";
        ff_validationFocus(element.name);
        return message;
    } // if
	
    try{
	    var repeat = element.name.split(""ff_nm_"")[1].split(""[]"")[0];
	
	    if(!ff_getElementByName(repeat + '_repeat')){
	     	if (message=='') message = repeat+"" has no repeat email field.\n"";
	        ff_validationFocus(element.name);
	        return message;
	    } else {
	        if(ff_getElementByName(repeat + '_repeat').value != element.value){
	           if (message=='') message = element.name+"" and "" + repeat + ""_repeat do not match.\n"";
	           ff_validationFocus(repeat + '_repeat');
	           return message;
	        }
	    }
    }catch(e){
        return e.description;
    }

    return '';
} // ff_validemail"
132,1,FF,ff_valuenotempty,Value not empty,Validate that value is not empty.,Element Validation,"function ff_valuenotempty(element, message)
{
    if (element.value!='') return ''; 
    if (message=='') message = ""Please enter ""+element.name+"".\n"";
    ff_validationFocus(element.name);
    return message;
} // ff_valuenotempty"
